<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Messager</title>
    <script type="text/javascript" src="res/js/jquery-1.11.2.js"></script>
    <style>
        * {
            margin: 0px;
            padding: 0px;
            font-size: 16px;
            list-style: none;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            text-decoration: none;
            outline: none;
        }

        body {
            background: #e1e1e1;
            font-family: "Helvetica Neue","Luxi Sans","DejaVu Sans",Tahoma,"Hiragino Sans GB",STHeiti,sans-serif!important;
            word-break: break-word;
            color: #333;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="res/myPlugins/jquery.message.css">
    <script type="text/javascript" src="res/myPlugins/jquery.message.js"></script>
    <script>
        ;
        (function($){
            var messageDiv = function(ele, opt) {
                this.$element = ele;
                this.defaults = {
                    'display':'none',
                    'z-index':'9000',
                    'background':'#F3F3F3',
                    'opacity':'0.8',
                    'position':'fixed',
                    'left':'0',
                    'top':'0',
                    'width':'100%',
                    'height':'100%'
                };
                this.options = $.extend({}, this.defaults, opt);
                this.$element.css(this.options);
            };



            function buildPromptDialog(){

            };



            messageDiv.prototype = {

                alert: function (title, content){
                    this.buildAlertDialog(title, content);

                    this.$element.show();
                },

                confirm: function (title, content, callback){
                    this.buildConfirmDialog(title, content, callback);

                    this.$element.show();
                },

                wait: function(){

                },

                prompt: function(title, content, timeOut){

                },

                buildAlertDialog: function (title, content){
                    var template = '';
                    template += '<div id="alertDialog" style="border:1px solid #95B8E7;padding: 5px;border-radius: 5px;width:300px;position:relative;top:30%;background:-webkit-linear-gradient(top,#EFF5FF 0,#E0ECFF 20%);margin: 0 auto;">';
                    template += '   <div style="width:100%;height:25px;">';
                    template += '       <span style="padding:5px;font-size:14px;">'+title+'</span>';
                    template += '   </div>';
                    template += '   <div style="background-color:white;width:288px;padding:10px;">';
                    template += '       <div style="text-align: center;font-size: 14px;">'+content+'</div>';
                    template += '       <div id="closeAlertBtn" style="margin: 0 auto;width:50px;border:1px solid #95B8E7;padding: 3px;border-radius: 5px;text-align: center;font-size: 14px;cursor: pointer;margin-top: 10px;">确定</div>';
                    template += '   </div>';
                    template += '</div>';

                    this.$element.html(template);
                    $('#closeAlertBtn').on('click', this.$element, this.close);
                },

                buildConfirmDialog: function (title, content, callback){
                    var template = '';
                    template += '<div id="alertDialog" style="border:1px solid #95B8E7;padding: 5px;border-radius: 5px;width:300px;position:relative;top:30%;background:-webkit-linear-gradient(top,#EFF5FF 0,#E0ECFF 20%);margin: 0 auto;">';
                    template += '   <div style="width:100%;height:25px;">';
                    template += '       <span style="padding:5px;font-size:14px;">'+title+'</span>';
                    template += '   </div>';
                    template += '   <div style="background-color:white;width:288px;padding:10px;">';
                    template += '       <div style="text-align: center;font-size: 14px;">'+content+'</div>';
                    template += '       <div id="closeAlertBtn" style="margin: 0 auto;width:50px;border:1px solid #95B8E7;padding: 3px;border-radius: 5px;text-align: center;font-size: 14px;cursor: pointer;margin-top: 10px;">确定</div>';
                    template += '   </div>';
                    template += '</div>';

                    this.$element.html(template);
                    $('#closeAlertBtn').on('click', {obj:this.$element, callback:callback}, this.affirm);
                },

                close: function (event){
                    event.data.html('');
                    event.data.hide();
                    return false;
                },

                affirm: function (event){
                    if(event.data.callback)
                        event.data.callback();
                    event.data.obj.html('');
                    event.data.obj.hide();
                    return false;
                }
            }

            $.fn.messager = function (opt){
                return new messageDiv(this, opt);
            };
        })(jQuery);

        $(function (){
            $('#messageDiv').messager().confirm('aaa','bbb', function(){alert('mmmm');});
        });
    </script>
</head>
<body>

    <div id="messageDiv"></div>

</body>
</html>